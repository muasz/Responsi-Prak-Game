<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover"/>
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="theme-color" content="#1e90ff">
  <title>Dark Forest Runner</title>
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <div id="container">
    <div id="header">
      <h1>🌑 Dark Forest Runner 🌑</h1>
      <p id="instructions">
        Gunakan <b>← →</b> untuk bergerak, <b>SPACE</b> untuk lompat.<br>
        Kumpulkan kristal, hindari musuh, masuk portal untuk menang.<br>
        Tekan <b>R</b> untuk restart.
        <span class="mobile-hint">📱 Gunakan tombol di bawah layar untuk bermain di mobile</span>
      </p>
    </div>

    <div id="ui">
      <div id="score">Score: 0</div>
      <div id="lives">❤️❤️❤️</div>
      <div id="message"></div>
      <div class="level-indicator" id="levelIndicator">Level 1</div>
    </div>

    <canvas id="gameCanvas"></canvas>

    <!-- Mobile Controls -->
    <div id="mobileControls" class="mobile-only">
      <div class="control-group left">
        <button id="leftBtn" class="control-btn">←</button>
        <button id="rightBtn" class="control-btn">→</button>
      </div>
      <div class="control-group right">
        <button id="jumpBtn" class="control-btn jump">JUMP</button>
        <button id="shootBtn" class="control-btn shoot">SHOOT</button>
      </div>
    </div>

    <footer>
      <span>Made by Your Hugo &copy; 2025</span>
    </footer>
  </div>

  <div id="startScreen" class="overlay show">
    <div id="loadingContent" style="display: none;">
      <h1>🌑 Loading Dark Forest... 🌑</h1>
      <div class="loading-spinner"></div>
      <div class="progress-bar">
        <div class="progress-fill" id="progressFill"></div>
      </div>
      <p id="loadingText">Loading assets...</p>
    </div>
    
    <div id="menuContent">
      <h1>🎮 Petualangan Kristal</h1>
      <p>Gunakan ← → untuk bergerak, SPACE untuk lompat, X untuk menembak.</p>
      <p class="mobile-hint">Atau gunakan tombol kontrol di layar untuk mobile</p>
      <button onclick="startGame()">Mulai Game</button>
      <button onclick="showTutorial()" class="settings-btn">📚 Tutorial</button>
      <button onclick="showSettings()" class="settings-btn">⚙️ Settings</button>
      <button onclick="showHighScores()" class="settings-btn">🏆 High Scores</button>
    </div>
  </div>

  <div id="pauseScreen" class="overlay">
    <h1>⏸ Game Dijeda</h1>
    <p>Tekan ESC lagi untuk lanjut.</p>
  </div>

  <!-- Settings Screen -->
  <div id="settingsScreen" class="overlay">
    <h1>⚙️ Settings</h1>
    <div class="settings-content">
      <div class="setting-item">
        <label>🔊 Volume Music:</label>
        <input type="range" id="musicVolume" min="0" max="100" value="50">
        <span id="musicVolumeValue">50%</span>
      </div>
      <div class="setting-item">
        <label>🔊 Volume SFX:</label>
        <input type="range" id="sfxVolume" min="0" max="100" value="70">
        <span id="sfxVolumeValue">70%</span>
      </div>
      <div class="setting-item">
        <label>📱 Show Mobile Controls:</label>
        <input type="checkbox" id="showMobileControls" checked>
      </div>
    </div>
    <button onclick="closeSettings()">Tutup</button>
    <button onclick="resetSettings()">Reset Default</button>
  </div>

  <!-- High Score Screen -->
  <div id="highScoreScreen" class="overlay">
    <h1>🏆 High Scores</h1>
    <div id="highScoreList"></div>
    <button onclick="closeHighScore()">Tutup</button>
    <button onclick="clearHighScores()">Clear Scores</button>
  </div>

  <!-- Tutorial Screen -->
  <div id="tutorialScreen" class="overlay">
    <h1>📚 Tutorial</h1>
    <div class="tutorial-content">
      <div class="tutorial-step">
        <h3>🎮 Kontrol Dasar</h3>
        <p>← → : Bergerak kiri/kanan</p>
        <p>SPACE : Lompat</p>
        <p>X : Menembak</p>
        <p>ESC : Pause/Resume</p>
        <p>R : Restart (saat game over)</p>
      </div>
      <div class="tutorial-step">
        <h3>💎 Power-ups</h3>
        <p>↑↑ : Double Jump - Lompat dua kali</p>
        <p>💨 : Fast Shoot - Tembakan lebih cepat</p>
        <p>❤ : Extra Life - Nyawa tambahan</p>
      </div>
      <div class="tutorial-step">
        <h3>🎯 Tujuan</h3>
        <p>• Kumpulkan semua kristal biru</p>
        <p>• Hindari atau tembak musuh merah</p>
        <p>• Masuk ke portal untuk level selanjutnya</p>
        <p>• Selesaikan 5 level untuk menang!</p>
      </div>
    </div>
    <button onclick="closeTutorial()">Tutup</button>
  </div>

  <!-- Loading Screen -->
  <div id="loadingScreen" class="overlay">
    <h1>🎮 Loading...</h1>
    <div class="loading-bar">
      <div id="loadingProgress"></div>
    </div>
    <p>Memuat assets game...</p>
  </div>

  <!-- Audio dan script tetap di luar container -->
  <audio id="bgMusic" src="assets/audio/bg-music.mp3" loop></audio>
  <audio id="jumpSound" src="assets/audio/jump.wav"></audio>
  <audio id="loseSound" src="assets/audio/lose1.mp3"></audio>
  <audio id="winSound" src="assets/audio/win2.mp3"></audio>
  <script src="game.js"></script>
</body>
</html>
